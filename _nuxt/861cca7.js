(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{263:function(t,e,n){"use strict";n.r(e);n(38),n(14),n(27),n(184),n(71),n(47);var o=n(255),c=n(257),r=n.n(c),l={data:function(){return{cacheSearch:"",nowCityName:"",nowType:"",cities:[{name:"臺北市",nameEn:"Taipei"},{name:"新北市",nameEn:"NewTaipei"},{name:"桃園市",nameEn:"Taoyuan"},{name:"臺中市",nameEn:"Taichung"},{name:"臺南市",nameEn:"Tainan"},{name:"高雄市",nameEn:"Kaohsiung"},{name:"基隆市",nameEn:"Keelung"},{name:"新竹市",nameEn:"Hsinchu"},{name:"新竹縣",nameEn:"HsinchuCounty"},{name:"苗栗縣",nameEn:"MiaoliCounty"},{name:"彰化縣",nameEn:"ChanghuaCounty"},{name:"南投縣",nameEn:"NantouCounty"},{name:"雲林縣",nameEn:"YunlinCounty"},{name:"嘉義縣",nameEn:"ChiayiCounty"},{name:"嘉義市",nameEn:"Chiayi"},{name:"屏東縣",nameEn:"PingtungCounty"},{name:"宜蘭縣",nameEn:"YilanCounty"},{name:"花蓮縣",nameEn:"HualienCounty"},{name:"臺東縣",nameEn:"TaitungCounty"},{name:"金門縣",nameEn:"KinmenCounty"},{name:"澎湖縣",nameEn:"PenghuCounty"},{name:"連江縣",nameEn:"LienchiangCounty"}],cyclingData:[],myLayer:null,scenicSpotData:[],restaurantData:[],swiperOption:{spaceBetween:10,effect:"fade",pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1024:{slidesPerView:4,spaceBetween:10},768:{slidesPerView:2,spaceBetween:10},640:{slidesPerView:2,spaceBetween:10},320:{slidesPerView:1,spaceBetween:10}}}}},computed:{filterCyclingData:function(){var t=this;return this.cyclingData.filter((function(e){return e.RouteName.match(t.cacheSearch)}))}},created:function(){this.leaflet=n(256),this.swiper=n(187)},mounted:function(){this.getCyclingData("Taipei"),this.displayMap()},methods:{getCyclingData:function(t){var e=this,n="https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape/".concat(t,"?$format=JSON");this.$axios.get(n,{headers:this.getAuthorizationHeader()}).then((function(t){e.cyclingData=t.data}))},getScenicSpotData:function(t,e){var n=this,o="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$spatialFilter=nearby(".concat(t,"%2C%20").concat(e,"%2C%202000)&$format=JSON");this.$axios.get(o,{headers:this.getAuthorizationHeader()}).then((function(t){n.scenicSpotData=t.data}))},getRestaurantData:function(t,e){var n=this,o="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$spatialFilter=nearby(".concat(t,"%2C%20").concat(e,"%2C%202000)&$format=JSON");this.$axios.get(o,{headers:this.getAuthorizationHeader()}).then((function(t){n.restaurantData=t.data}))},changeCity:function(t){this.nowCityName=t,this.cacheSearch="",this.getCyclingData(t)},changeLayer:function(t){this.polyLine(t)},setScenicSpotCoordinate:function(t,e,n){this.cacheCoordinate&&this.myMap.removeLayer(this.cacheCoordinate),this.cacheCoordinate=this.leaflet.marker([e,n],{icon:this.setIconColor("blue")}).bindPopup("<p>".concat(t,'</p>\n        <a href="https://www.google.com.tw/maps/search/').concat(t,'" target="_blank">Google 導航</a>\n        ')),this.cacheCoordinate.addTo(this.myMap).openPopup(),this.myMap.setView([e,n],14),this.setTop()},setIconColor:function(t){return new this.leaflet.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-".concat(t,".png"),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},setTop:function(){var t=0;window.screen.width>=992&&(t=550),window.scrollTo({top:t,behavior:"smooth"})},displayMap:function(){this.myMap=this.leaflet.map("mapID",{center:[25.0462,121.5174],zoom:13}),this.leaflet.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidmljMzMzIiwiYSI6ImNrdXRqNHBjbTVwa3Myb21uc3hrajJkeHEifQ.TeelvbEBo9SIQjYpUdv70g"}).addTo(this.myMap)},polyLine:function(t){var e=(new r.a.Wkt).read(t).toJson();this.myLayer&&this.myMap.removeLayer(this.myLayer),this.myLayer=this.leaflet.geoJSON(e,{style:{color:"#fe5e01",weight:5,opacity:1}}).addTo(this.myMap),this.myLayer.addData(e),this.myMap.fitBounds(this.myLayer.getBounds()),this.getScenicSpotData(e.coordinates[0][0][1],e.coordinates[0][0][0]),this.getRestaurantData(e.coordinates[0][0][1],e.coordinates[0][0][0])},getAuthorizationHeader:function(){var t=(new Date).toGMTString(),e=new o.a("SHA-1","TEXT");e.setHMACKey("qd4_Nh2b30-edGu3vXmbDzaWTFU","TEXT"),e.update("x-date: ".concat(t));var n=e.getHMAC("B64");return{Authorization:'hmac username="'.concat("3209d3c409014e8cb42b5e83f861c102",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(n,'"'),"X-Date":t}}}},m=n(24),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("section",{staticClass:"container bg-secondary py-5 mb-5 rounded"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("select",{staticClass:"form-select py-3 border-secondary",attrs:{"aria-label":"Default select example"},on:{change:function(e){return t.changeCity(e.target.value)}}},[n("option",{attrs:{hidden:"請選擇城市"!==t.nowCityName},domProps:{selected:"請選擇城市"===t.nowCityName}},[t._v("\n            請選擇城市\n          ")]),t._v(" "),t._l(t.cities,(function(e,o){return n("option",{key:e.name+o,domProps:{value:e.nameEn,selected:e.name===t.nowCityName}},[t._v("\n            "+t._s(e.name)+"\n          ")])}))],2)]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheSearch,expression:"cacheSearch"}],staticClass:"form-control py-3 border-secondary",attrs:{placeholder:"請輸入關鍵字",disabled:"請選擇城市"===t.nowCityName},domProps:{value:t.cacheSearch},on:{input:function(e){e.target.composing||(t.cacheSearch=e.target.value)}}})])])]),t._v(" "),n("section",{staticClass:"container mb-8 mb-lg-15"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-5 mb-8 mb-lg-0"},[n("ul",{staticClass:"list-unstyled justify-content-center overflow-auto magic-height-600"},t._l(t.filterCyclingData,(function(e,o){return n("li",{key:e.RouteName+o,staticClass:"border border-secondary me-2 mb-2",on:{click:function(n){return t.changeLayer(e.Geometry)}}},[n("div",{staticClass:"p-3"},[n("h2",{staticClass:"fz-larger"},[t._v("\n                "+t._s(e.RouteName)+"\n              ")]),t._v(" "),n("ul",{staticClass:"list-unstyled row"},[n("li",{staticClass:"col-lg-8"},[n("p",[t._v("開始地點: "+t._s(e.RoadSectionStart))])]),t._v(" "),n("li",{staticClass:"col-lg-4"},[e.Direction?n("p",[t._v("\n                    車道類型: "+t._s(e.Direction)+"\n                  ")]):n("p",[t._v("\n                    車道類型: 無說明\n                  ")])]),t._v(" "),n("li",{staticClass:"col-lg-8"},[n("p",[t._v("結束地點: "+t._s(e.RoadSectionEnd))])]),t._v(" "),n("li",{staticClass:"col-lg-4"},[n("p",[t._v("車道長度: "+t._s(e.CyclingLength))])])])])])})),0)]),t._v(" "),n("div",{staticClass:"col-lg-7"},[n("div",{ref:"mapID",staticClass:"magic-height-600",attrs:{id:"mapID"}})])])]),t._v(" "),t.scenicSpotData[0]?n("section",{staticClass:"container mb-8 mb-lg-15"},[n("p",{staticClass:"mb-5 fz-larger"},[t._v("\n      附近景點(方圓兩公里)\n    ")]),t._v(" "),n("swiper",{attrs:{options:t.swiperOption}},t._l(t.scenicSpotData,(function(e){return n("swiper-slide",{key:e.ID},[n("div",{staticClass:"border rounded-4 h-100"},[n("a",{staticClass:"stretched-link",on:{click:function(n){return n.preventDefault(),t.setScenicSpotCoordinate(e.Name,e.Position.PositionLat,e.Position.PositionLon)}}},[e.Picture.PictureUrl1?n("img",{staticClass:"img img__card magic-height-128 magic-height-md-190",attrs:{src:e.Picture.PictureUrl1,alt:e.Picture.PictureDescription1}}):n("p",{staticClass:"\n                img\n                magic-height-128 magic-height-md-190\n                bg-grey\n                text-secondary\n                fz-large\n                d-flex\n                justify-content-center\n                align-items-center\n              "},[t._v("\n              暫未提供\n            ")])]),t._v(" "),n("div",{staticClass:"py-3 px-4"},[n("h2",{staticClass:"fz-medium mb-2"},[t._v("\n              "+t._s(e.Name)+"\n            ")]),t._v(" "),n("p",{staticClass:"text-info mb-3 d-flex"},[t._v("\n              "+t._s(e.City)+"\n            ")]),t._v(" "),n("p",{staticClass:"text-truncate"},[t._v("\n              "+t._s(e.Description)+"\n            ")])])])])})),1)],1):t._e(),t._v(" "),t.restaurantData[0]?n("section",{staticClass:"container mb-8 mb-lg-15"},[n("p",{staticClass:"mb-5 fz-larger"},[t._v("\n      附近餐飲(方圓兩公里)\n    ")]),t._v(" "),n("swiper",{attrs:{options:t.swiperOption}},t._l(t.restaurantData,(function(e){return n("swiper-slide",{key:e.ID},[n("div",{staticClass:"border rounded-4 h-100"},[n("a",{staticClass:"stretched-link",on:{click:function(n){return n.preventDefault(),t.setScenicSpotCoordinate(e.Name,e.Position.PositionLat,e.Position.PositionLon)}}},[e.Picture.PictureUrl1?n("img",{staticClass:"img img__card magic-height-128 magic-height-md-190",attrs:{src:e.Picture.PictureUrl1,alt:e.Picture.PictureDescription1}}):n("p",{staticClass:"\n                img\n                magic-height-128 magic-height-md-190\n                bg-grey\n                text-secondary\n                fz-large\n                d-flex\n                justify-content-center\n                align-items-center\n              "},[t._v("\n              暫未提供\n            ")])]),t._v(" "),n("div",{staticClass:"py-3 px-4"},[n("h2",{staticClass:"fz-medium mb-2"},[t._v("\n              "+t._s(e.Name)+"\n            ")]),t._v(" "),n("p",{staticClass:"text-info mb-3 d-flex"},[t._v("\n              "+t._s(e.City)+"\n            ")]),t._v(" "),n("p",{staticClass:"text-truncate"},[t._v("\n              "+t._s(e.Description)+"\n            ")])])])])})),1)],1):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"banner banner__recommend magic-height-300 mb-8 mb-lg-15"},[n("div",{staticClass:"container d-flex align-items-end h-100"},[n("h2",{staticClass:"mb-5 fz-huge fw-bolder zi-9"},[t._v("\n        自行車路線\n      ")])])])}],!1,null,null,null);e.default=component.exports}}]);